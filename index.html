<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ØªØ·Ø¨ÙŠÙ‚ Ø¬ÙŠØ¨ - Ù‚Ø§Ø¦Ù…Ø© ØªØ³ÙˆÙ‚ Ø§Ù„Ø¹ÙŠÙ„Ø©</title>

    <!-- Ø®Ø· ØªØ¬ÙˆØ§Ù„ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&display=swap"
        rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Howler.js Ø§Ù„Ù…ÙƒØªØ¨Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„ØµÙˆØª -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cream: {
                            50: '#f8fafc', // Slate 50 - ØªØ¹Ø¯ÙŠÙ„: Ø£ØµØ¨Ø­ Ø£Ø¨ÙŠØ¶ Ø«Ù„Ø¬ÙŠ
                            100: '#f1f5f9', // Slate 100
                            200: '#e2e8f0', // Slate 200
                        },
                        sage: {
                            500: '#0f172a', // Slate 900 - ØªØ¹Ø¯ÙŠÙ„: Ø£ØµØ¨Ø­ ÙƒØ­Ù„ÙŠ Ø¯Ø§ÙƒÙ† (Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ)
                            600: '#1e293b', // Slate 800
                            700: '#334155', // Slate 700
                            100: '#e2e8f0', // ØªØ¹Ø¯ÙŠÙ„ Ù„Ù„Ø®Ù„ÙÙŠØ§Øª
                            50: '#f8fafc', // ØªØ¹Ø¯ÙŠÙ„: Ù„ÙˆÙ† ÙØ§ØªØ­ Ø¬Ø¯Ø§Ù‹
                            900: '#020617', // Slate 950 - Ù„Ù„Ù†ØµÙˆØµ Ø§Ù„ØºØ§Ù…Ù‚Ø© Ø¬Ø¯Ø§Ù‹
                        },
                        peach: {
                            400: '#60a5fa', // Blue 400 - ØªØ¹Ø¯ÙŠÙ„: Ø£ØµØ¨Ø­ Ø£Ø²Ø±Ù‚ ÙØ§ØªØ­ (Ù„Ù„Ø¥Ø¶Ø§Ø¡Ø©)
                            500: '#3b82f6', // Blue 500 - ØªØ¹Ø¯ÙŠÙ„: Ø£ØµØ¨Ø­ Ø£Ø²Ø±Ù‚ Ø³Ø§Ø·Ø¹ (Accent)
                            600: '#2563eb', // Blue 600
                            100: '#eff6ff', // Blue 50
                        },
                        dark: {
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    },
                    fontFamily: {
                        'tajawal': ['Tajawal', 'sans-serif'],
                    },
                    boxShadow: {
                        'soft': '0 10px 40px -10px rgba(124, 148, 115, 0.15)',
                        'inner-light': 'inset 0 2px 4px 0 rgba(255, 255, 255, 0.5)',
                    },
                    borderRadius: {
                        '3xl': '1.5rem',
                        '4xl': '2.5rem',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.5s cubic-bezier(0.16, 1, 0.3, 1)',
                        'pop': 'pop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0' },
                            '100%': { opacity: '1' },
                        },
                        slideUp: {
                            '0%': { transform: 'translateY(20px)', opacity: '0' },
                            '100%': { transform: 'translateY(0)', opacity: '1' },
                        },
                        pop: {
                            '0%': { transform: 'scale(0.95)' },
                            '50%': { transform: 'scale(1.1)' },
                            '100%': { transform: 'scale(1)' },
                        }
                    }
                },
            },
        }
    </script>

    <style>
        * {
            font-family: 'Tajawal', sans-serif;
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
        }

        body {
            background-color: #f8fafc;
            /* ØªØ¹Ø¯ÙŠÙ„: Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ© Ø£Ø¨ÙŠØ¶ Ø«Ù„Ø¬ÙŠ */
            color: #0f172a;
            /* ØªØ¹Ø¯ÙŠÙ„: Ù„ÙˆÙ† Ø§Ù„Ù†Øµ ÙƒØ­Ù„ÙŠ */
            /* pattern overlay opacity 0.4 */
            background-image: radial-gradient(#cbd5e1 0.5px, transparent 0.5px);
            /* ØªØ¹Ø¯ÙŠÙ„: Ù„ÙˆÙ† Ø§Ù„Ù†Ù‚Ø§Ø· Ø±Ù…Ø§Ø¯ÙŠ ÙØ§ØªØ­ */
            background-size: 20px 20px;
        }

        /* Hide Scrollbar */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }

        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Custom SweetAlert Styles */
        div:where(.swal2-container) div:where(.swal2-popup) {
            border-radius: 2rem !important;
            font-family: 'Tajawal', sans-serif !important;
            background: #fdfbf7 !important;
        }

        div:where(.swal2-container) button:where(.swal2-styled).swal2-confirm {
            background-color: #3b82f6 !important;
            /* ØªØ¹Ø¯ÙŠÙ„: Ø£Ø²Ø±Ù‚ Ø³Ø§Ø·Ø¹ */
            border-radius: 1rem !important;
            font-weight: bold !important;
        }

        .category-tab {
            transition: all 0.3s ease;
        }

        .category-tab.active {
            background-color: #0f172a;
            /* ØªØ¹Ø¯ÙŠÙ„: ÙƒØ­Ù„ÙŠ Ø¯Ø§ÙƒÙ† */
            color: white;
            box-shadow: 0 8px 20px -6px rgba(15, 23, 42, 0.4);
            /* ØªØ¹Ø¯ÙŠÙ„: Ø¸Ù„ ÙƒØ­Ù„ÙŠ */
            transform: translateY(-2px);
        }

        .item-card {
            background: white;
            transition: all 0.2s ease;
            border: 1px solid #f3f4f6;
        }

        .item-card.selected {
            border: 2px solid #0f172a;
            /* ØªØ¹Ø¯ÙŠÙ„: Ø­Ø¯ÙˆØ¯ ÙƒØ­Ù„ÙŠ */
            background: #f1f5f9;
            /* ØªØ¹Ø¯ÙŠÙ„: Ø®Ù„ÙÙŠØ© ÙØ§ØªØ­Ø© Ø¬Ø¯Ø§Ù‹ */
        }

        .floating-action {
            box-shadow: 0 10px 30px -5px rgba(59, 130, 246, 0.4);
            /* ØªØ¹Ø¯ÙŠÙ„: Ø¸Ù„ Ø£Ø²Ø±Ù‚ */
        }
    </style>
    <link rel="manifest" href="manifest.json">

    <link rel="apple-touch-icon" href="images (1).jfif">

    <link rel="icon" type="image/x-icon" href="images (1).jfif">

    <meta name="theme-color" content="#0f172a"> <!-- ØªØ¹Ø¯ÙŠÙ„: Ù„ÙˆÙ† Ø§Ù„Ø«ÙŠÙ… ÙƒØ­Ù„ÙŠ -->
</head>

<body class="min-h-screen pb-40">

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© (Splash Screen) -->
    <div id="splash-screen"
        class="fixed inset-0 z-[100] bg-[#0f172a] flex flex-col items-center justify-center transition-opacity duration-1000">
        <!-- Ø§Ù„Ø®Ù„ÙÙŠØ© Ø§Ù„Ù…ØªØ­Ø±ÙƒØ© Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª -->
        <div id="splash-icons" class="absolute inset-0 overflow-hidden opacity-20"></div>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ ÙÙŠ Ø§Ù„ÙˆØ³Ø· -->
        <div class="relative z-10 text-center animate-fade-in">
            <div
                class="mb-6 inline-block p-6 rounded-full bg-white/10 backdrop-blur-md shadow-2xl border border-white/20">
                <i data-lucide="chef-hat" class="w-20 h-20 text-white"></i>
            </div>
            <h1 class="text-4xl font-black text-white mb-4 tracking-wide shadow-black drop-shadow-lg">
     Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ Ø¹Ù…ØªÙŠ Ø³Ø§Ù„Ù…Ø© ğŸ˜ğŸ‘
            </h1>
            <p class="text-blue-200 text-lg font-medium">Ù†ÙˆØ±ØªÙŠ ØªØ·Ø¨ÙŠÙ‚Ùƒ ÙŠØ§ ØºØ§Ù„ÙŠØ©</p>
        </div>
    </div>

    <!-- Header -->
    <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-md border-b border-sage-500/10 shadow-sm rounded-b-4xl">
        <div class="max-w-lg mx-auto p-5 pb-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 bg-sage-500/10 rounded-full flex items-center justify-center text-sage-600">
                        <i data-lucide="chef-hat" class="w-7 h-7"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-black text-sage-600">ØªØ·Ø¨ÙŠÙ‚ Ø¬ÙŠØ¨</h1>
                        <p class="text-xs font-medium text-gray-400">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹ÙŠÙ„Ø© â€¢ <span id="current-date"></span></p>
                    </div>
                </div>

                <div class="flex gap-2">
                    <!-- Ø²Ø± ÙƒØªÙ… Ø§Ù„ØµÙˆØª -->
                    <button onclick="toggleMute()" id="mute-btn"
                        class="bg-cream-100 p-2.5 rounded-2xl hover:bg-cream-200 transition-colors text-sage-700">
                        <i id="mute-icon" data-lucide="volume-2" class="w-6 h-6"></i>
                    </button>
                    <!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø¹Ø±Ø¶ -->
                    <button onclick="toggleView()"
                        class="bg-cream-100 p-2.5 rounded-2xl hover:bg-cream-200 transition-colors text-sage-700">
                        <i id="view-icon" data-lucide="users" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>

            <!-- Summary Card -->
            <div id="summary-card"
                class="mt-4 bg-sage-500 text-white p-4 rounded-3xl shadow-soft flex justify-between items-center transform transition-all">
                <div class="flex items-baseline gap-1">
                    <span id="header-count" class="text-3xl font-black">0</span>
                    <span class="text-sage-100 text-sm">ØºØ±Ø¶ ÙÙŠ Ø§Ù„Ø³Ù„Ø©</span>
                </div>
                <div class="bg-white/20 p-2 rounded-xl backdrop-blur-sm">
                    <i data-lucide="shopping-basket" class="w-6 h-6 text-white"></i>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-lg mx-auto p-4">

        <!-- SHOPPING LIST VIEW -->
        <div id="view-shopping" class="animate-fade-in">
            <!-- Search -->
            <div class="relative mb-6 group">
                <input type="text" id="search-input" placeholder="Ø´Ù†Ùˆ Ù†Ø§Ù‚Øµ Ø§Ù„Ù…Ø·Ø¨Ø® Ø§Ù„ÙŠÙˆÙ…ØŸ"
                    class="w-full bg-white border-2 border-transparent focus:border-peach-400 rounded-3xl py-4 pr-12 pl-4 shadow-sm outline-none transition-all placeholder:text-gray-300 font-bold text-gray-600">
                <i data-lucide="search"
                    class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-300 w-5 h-5 group-focus-within:text-peach-400 transition-colors"></i>
            </div>

            <!-- Categories -->
            <div class="sticky top-[140px] z-40 bg-[#fdfbf7]/95 backdrop-blur-sm py-2 -mx-4 px-4 mb-4 overflow-hidden">
                <div id="categories-container" class="flex gap-2 overflow-x-auto no-scrollbar pb-2">
                    <!-- Javascript will populate this -->
                </div>
            </div>

            <!-- Items Grid -->
            <div id="items-grid" class="grid grid-cols-2 gap-3 pb-20">
                <!-- Javascript will populate this -->
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="hidden text-center py-10 opacity-60">
                <i data-lucide="carrot" class="w-16 h-16 mx-auto text-gray-300 mb-2"></i>
                <p>Ù…Ø§ Ù„Ù‚ÙŠØªØ´ Ø§Ù„ØºØ±Ø¶ Ù‡Ø°Ø§ ÙŠØ§ Ø£Ù…ÙŠ</p>
            </div>
        </div>

        <!-- FAMILY DIRECTORY VIEW -->
        <div id="view-family" class="hidden animate-fade-in pb-20">
            <div class="text-center mb-8">
                <h2 class="text-2xl font-bold text-sage-600 mb-2">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¨Ù†Ø§Ø¡</h2>
                <p class="text-gray-400 text-sm">Ø³Ø¬Ù„ÙŠ Ø£Ø±Ù‚Ø§Ù…Ù‡Ù… Ø¨Ø§Ø´ ØªØ¨Ø¹Ø«ÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø¨Ø³Ø±Ø¹Ø©</p>
            </div>

            <div id="family-list" class="space-y-3 mb-8">
                <!-- Family members here -->
            </div>

            <button onclick="addFamilyMember()"
                class="w-full py-4 border-2 border-dashed border-sage-500/30 rounded-3xl text-sage-600 font-bold hover:bg-sage-50 transition-colors flex items-center justify-center gap-2">
                <i data-lucide="plus-circle" class="w-5 h-5"></i>
                Ø¥Ø¶Ø§ÙØ© Ø§Ø¨Ù† Ø¬Ø¯ÙŠØ¯
            </button>
        </div>

    </main>

    <!-- Bottom Actions Bar -->
    <div id="action-bar"
        class="fixed bottom-6 left-4 right-4 max-w-lg mx-auto z-40 flex gap-3 transition-transform duration-300 translate-y-32">
        <button onclick="copyList()"
            class="bg-white text-sage-600 w-14 h-14 rounded-full shadow-lg flex items-center justify-center hover:scale-105 transition-transform">
            <i data-lucide="copy" class="w-6 h-6"></i>
        </button>

        <button onclick="handleSend()"
            class="flex-1 bg-peach-500 text-white rounded-[2rem] shadow-soft shadow-peach-500/40 h-14 flex items-center justify-center gap-2 font-bold text-lg hover:scale-[1.02] active:scale-95 transition-all">
            <span>Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</span>
            <i data-lucide="send" class="w-5 h-5 rtl:rotate-180"></i>
        </button>

        <button onclick="confirmClear()"
            class="bg-white text-red-400 w-14 h-14 rounded-full shadow-lg flex items-center justify-center hover:bg-red-50 transition-colors">
            <i data-lucide="trash-2" class="w-6 h-6"></i>
        </button>
    </div>

    <script>
        // --- DATA ---
        const DATA = [
            {
                id: 'cat1', title: 'Ø£Ø³Ø§Ø³ÙŠØ§Øª', icon: 'flame', emoji: 'ğŸ”¥',
                items: [
                    { id: 1, name: 'Ø®Ø¨Ø²', icon: 'ğŸ¥–', unit: 'Ø±Ø¨Ø·Ø©' },
                    { id: 2, name: 'Ø¨ÙŠØ¶', icon: 'ğŸ¥š', unit: 'Ø·Ø¨Ù‚' },
                    { id: 3, name: 'Ø²ÙŠØª Ø·Ø¨Ø®', icon: 'ğŸŒ»', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 4, name: 'Ø³ÙƒØ±', icon: 'ğŸ¬', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 5, name: 'Ø£Ø±Ø²', icon: 'ğŸš', unit: 'ÙƒÙŠØ³' },
                    { id: 6, name: 'Ù…Ù„Ø­', icon: 'ğŸ§‚', unit: 'ÙƒÙŠØ³' },
                    { id: 7, name: 'Ø·Ø­ÙŠÙ†', icon: 'ğŸŒ¾', unit: 'ÙƒÙŠØ³' },
                    { id: 8, name: 'Ù…ÙƒØ±ÙˆÙ†Ø©', icon: 'ğŸ', unit: 'ÙƒÙŠØ³' },
                    { id: 9, name: 'Ø´Ø§ÙŠ', icon: 'ğŸµ', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 10, name: 'Ø´Ø¹ÙŠØ±ÙŠØ©', icon: 'ğŸœ', unit: 'ÙƒÙŠØ³' },
                    { id: 11, name: 'ÙƒØ³ÙƒØ³ÙŠ', icon: 'ğŸ¥˜', unit: 'ÙƒÙŠØ³' },
                    { id: 12, name: 'Ø¹Ø¯Ø³', icon: 'ğŸ«˜', unit: 'ÙƒÙŠØ³' },
                ]
            },
            {
                id: 'cat2', title: 'Ø®Ø¶Ø§Ø±', icon: 'leaf', emoji: 'ğŸ¥¬',
                items: [
                    { id: 20, name: 'Ø·Ù…Ø§Ø·Ù…', icon: 'ğŸ…', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 21, name: 'Ø®ÙŠØ§Ø±', icon: 'ğŸ¥’', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 22, name: 'Ø¨ØµÙ„', icon: 'ğŸ§…', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 23, name: 'Ø¨Ø·Ø§Ø·Ø§', icon: 'ğŸ¥”', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 24, name: 'Ø«ÙˆÙ…', icon: 'ğŸ§„', unit: 'Ø±Ø£Ø³' },
                    { id: 25, name: 'ÙÙ„ÙÙ„ Ø£Ø®Ø¶Ø±', icon: 'ğŸ«‘', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 26, name: 'Ù„ÙŠÙ…ÙˆÙ†', icon: 'ğŸ‹', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 27, name: 'Ø¨Ø§Ø°Ù†Ø¬Ø§Ù†', icon: 'ğŸ†', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 28, name: 'ÙƒÙˆØ³Ø§', icon: 'ğŸ¥’', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 29, name: 'Ø¬Ø²Ø±', icon: 'ğŸ¥•', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 30, name: 'Ø®Ø³', icon: 'ğŸ¥¬', unit: 'Ø­Ø¨Ø©' },
                    { id: 31, name: 'Ø¨Ù‚Ø¯ÙˆÙ†Ø³', icon: 'ğŸŒ¿', unit: 'Ø±Ø¨Ø·Ø©' },
                    { id: 32, name: 'ÙƒØ²Ø¨Ø±Ø©', icon: 'ğŸŒ¿', unit: 'Ø±Ø¨Ø·Ø©' },
                    { id: 33, name: 'Ù†Ø¹Ù†Ø§Ø¹', icon: 'ğŸŒ±', unit: 'Ø±Ø¨Ø·Ø©' },
                    { id: 34, name: 'ÙØ¬Ù„', icon: 'ğŸ¥•', unit: 'Ø±Ø¨Ø·Ø©' },
                    { id: 35, name: 'Ù…Ù„ÙÙˆÙ', icon: 'ğŸ¥¬', unit: 'Ø­Ø¨Ø©' },
                ]
            },
            {
                id: 'cat3', title: 'Ù„Ø­ÙˆÙ…', icon: 'beef', emoji: 'ğŸ¥©',
                items: [
                    { id: 40, name: 'Ø¯Ø¬Ø§Ø¬ ÙƒØ§Ù…Ù„', icon: 'ğŸ—', unit: 'Ø­Ø¨Ø©' },
                    { id: 41, name: 'ØµØ¯ÙˆØ± Ø¯Ø¬Ø§Ø¬', icon: 'ğŸ—', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 42, name: 'Ø£ÙØ®Ø§Ø° Ø¯Ø¬Ø§Ø¬', icon: 'ğŸ—', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 43, name: 'Ù„Ø­Ù… ØºÙ†Ù…', icon: 'ğŸ–', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 44, name: 'Ù„Ø­Ù… Ø¨Ù‚Ø±', icon: 'ğŸ¥©', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 45, name: 'Ù„Ø­Ù… Ù…ÙØ±ÙˆÙ…', icon: 'ğŸ”', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 46, name: 'ÙƒØ¨Ø¯Ø©', icon: 'ğŸ«€', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 47, name: 'Ø³Ù…Ùƒ', icon: 'ğŸŸ', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 48, name: 'Ø¬Ù…Ø¨Ø±ÙŠ', icon: 'ğŸ¦', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 49, name: 'Ø³Ø¬Ù‚', icon: 'ğŸŒ­', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 50, name: 'Ù†Ù‚Ø§Ù†Ù‚', icon: 'ğŸŒ­', unit: 'Ø¨Ø§ÙƒÙˆ' },
                ]
            },
            {
                id: 'cat4', title: 'Ø£Ù„Ø¨Ø§Ù†', icon: 'milk', emoji: 'ğŸ¥›',
                items: [
                    { id: 60, name: 'Ø­Ù„ÙŠØ¨ Ø·Ø§Ø²Ø¬', icon: 'ğŸ¥›', unit: 'Ù„ØªØ±' },
                    { id: 61, name: 'Ø­Ù„ÙŠØ¨ Ø¨ÙˆØ¯Ø±Ø©', icon: 'ğŸ¥›', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 62, name: 'Ø²Ø¨Ø§Ø¯ÙŠ', icon: 'ğŸ¥£', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 63, name: 'Ù„Ø¨Ù†Ø©', icon: 'ğŸ¥£', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 64, name: 'Ø¬Ø¨Ù†Ø© Ø¨ÙŠØ¶Ø§Ø¡', icon: 'ğŸ§€', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 65, name: 'Ø²Ø¨Ø¯Ø©', icon: 'ğŸ§ˆ', unit: 'Ø­Ø¨Ø©' },
                    { id: 66, name: 'Ù‚Ø´Ø·Ø©', icon: 'ğŸ¯', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 67, name: 'Ø­Ù„ÙŠØ¨ Ù…ÙƒØ«Ù', icon: 'ğŸ¥«', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 68, name: 'Ø±ÙˆØ¨', icon: 'ğŸ¥›', unit: 'Ø¹Ù„Ø¨Ø©' },
                ]
            },
            {
                id: 'cat5', title: 'ÙÙˆØ§ÙƒÙ‡', icon: 'cherry', emoji: 'ğŸ',
                items: [
                    { id: 70, name: 'ØªÙØ§Ø­', icon: 'ğŸ', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 71, name: 'Ù…ÙˆØ²', icon: 'ğŸŒ', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 72, name: 'Ø¨Ø±ØªÙ‚Ø§Ù„', icon: 'ğŸŠ', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 73, name: 'Ø¹Ù†Ø¨', icon: 'ğŸ‡', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 74, name: 'Ù…Ø§Ù†Ø¬Ùˆ', icon: 'ğŸ¥­', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 75, name: 'ÙØ±Ø§ÙˆÙ„Ø©', icon: 'ğŸ“', unit: 'Ø·Ø¨Ù‚' },
                    { id: 76, name: 'Ø¨Ø·ÙŠØ®', icon: 'ğŸ‰', unit: 'Ø­Ø¨Ø©' },
                    { id: 77, name: 'Ø´Ù…Ø§Ù…', icon: 'ğŸˆ', unit: 'Ø­Ø¨Ø©' },
                    { id: 78, name: 'Ø±Ù…Ø§Ù†', icon: 'ğŸ«', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 79, name: 'ØªÙ…Ø±', icon: 'ğŸŒ´', unit: 'ÙƒÙŠÙ„Ùˆ' },
                    { id: 80, name: 'ØªÙŠÙ†', icon: 'ğŸ«', unit: 'ÙƒÙŠÙ„Ùˆ' },
                ]
            },
            {
                id: 'cat6', title: 'Ù…Ø¹Ù„Ø¨Ø§Øª', icon: 'package', emoji: 'ğŸ¥«',
                items: [
                    { id: 90, name: 'Ø·Ù…Ø§Ø·Ù… Ø­ÙƒÙƒ', icon: 'ğŸ¥«', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 91, name: 'ØµÙ„ØµØ© Ø·Ù…Ø§Ø·Ù…', icon: 'ğŸ¥«', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 92, name: 'ØªÙ† (ØªÙˆÙ†Ø©)', icon: 'ğŸŸ', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 93, name: 'Ù‡Ø±ÙŠØ³Ø© Ù„ÙŠØ¨ÙŠØ©', icon: 'ğŸŒ¶ï¸', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 94, name: 'ÙØ§ØµÙˆÙ„ÙŠØ§ Ù…Ø¹Ù„Ø¨Ø©', icon: 'ğŸ«˜', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 95, name: 'Ø¨Ø§Ø²Ù„Ø§Ø¡ Ù…Ø¹Ù„Ø¨Ø©', icon: 'ğŸ«›', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 96, name: 'Ø°Ø±Ø© Ù…Ø¹Ù„Ø¨Ø©', icon: 'ğŸŒ½', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 97, name: 'Ø²ÙŠØªÙˆÙ†', icon: 'ğŸ«’', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 98, name: 'Ù…Ø®Ù„Ù„', icon: 'ğŸ¥’', unit: 'Ø¨Ø±Ø·Ù…Ø§Ù†' },
                    { id: 99, name: 'ÙÙˆÙ„ Ù…Ø¯Ù…Ø³', icon: 'ğŸ«˜', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 100, name: 'Ø­Ù…Øµ Ù…Ø¹Ù„Ø¨', icon: 'ğŸ«˜', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 101, name: 'Ø³Ø±Ø¯ÙŠÙ†', icon: 'ğŸŸ', unit: 'Ø¹Ù„Ø¨Ø©' },
                ]
            },
            {
                id: 'cat7', title: 'Ù‚Ù‡ÙˆØ© ÙˆÙ…Ù†Ø¨Ù‡Ø§Øª', icon: 'coffee', emoji: 'â˜•',
                items: [
                    { id: 110, name: 'Ù†Ø³ÙƒØ§ÙÙŠÙ‡', icon: 'â˜•', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 111, name: 'Ø¨Ù† ÙˆØ·Ù†ÙŠ', icon: 'â˜•', unit: 'ÙƒÙŠØ³' },
                    { id: 112, name: 'Ø¨Ù† ØªØ±ÙƒÙŠ', icon: 'â˜•', unit: 'ÙƒÙŠØ³' },
                    { id: 113, name: 'Ø²Ù‡Ø± (Ø´Ø§ÙŠ Ø£Ø®Ø¶Ø±)', icon: 'ğŸµ', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 114, name: 'ÙƒØ§ÙƒØ§Ùˆ', icon: 'ğŸ«', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 115, name: 'Ø´Ø§ÙŠ Ù„ÙŠØ¨ØªÙˆÙ†', icon: 'ğŸµ', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 116, name: 'Ø´Ø§ÙŠ Ø£Ø­Ù…Ø±', icon: 'ğŸµ', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 117, name: 'Ù†Ø¹Ù†Ø§Ø¹ Ù…Ø¬ÙÙ', icon: 'ğŸŒ¿', unit: 'ÙƒÙŠØ³' },
                    { id: 118, name: 'ÙƒØ±ÙŠÙ…Ø±', icon: 'ğŸ¥›', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 119, name: 'Ø³ÙƒØ± Ø¨Ù†ÙŠ', icon: 'ğŸ¬', unit: 'ÙƒÙŠØ³' },
                ]
            },
            {
                id: 'cat8', title: 'Ù…Ø®Ø¨ÙˆØ²Ø§Øª', icon: 'croissant', emoji: 'ğŸ¥',
                items: [
                    { id: 130, name: 'Ø®Ø¨Ø² Ø´Ø¹ÙŠØ±', icon: 'ğŸ', unit: 'Ø±Ø¨Ø·Ø©' },
                    { id: 131, name: 'Ø®Ø¨Ø² ØªÙ†ÙˆØ±', icon: 'ğŸ«“', unit: 'Ø­Ø¨Ø©' },
                    { id: 132, name: 'Ø¨Ø±ÙŠÙˆØ´', icon: 'ğŸ¥', unit: 'Ø­Ø¨Ø©' },
                    { id: 133, name: 'ÙƒØ¹Ùƒ Ù…Ø§Ù„Ø­', icon: 'ğŸ¥¨', unit: 'ÙƒÙŠØ³' },
                    { id: 134, name: 'ØµÙ…ÙˆÙ†', icon: 'ğŸ¥–', unit: 'Ø­Ø¨Ø©' },
                    { id: 135, name: 'ØªÙˆØ³Øª', icon: 'ğŸ', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 136, name: 'ÙƒØ¹Ùƒ Ø­Ù„Ùˆ', icon: 'ğŸ©', unit: 'ÙƒÙŠØ³' },
                    { id: 137, name: 'ÙØ·ÙŠØ±Ø©', icon: 'ğŸ¥§', unit: 'Ø­Ø¨Ø©' },
                    { id: 138, name: 'Ø®Ø¨Ø² Ø¨Ø±Ø¬Ø±', icon: 'ğŸ”', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 139, name: 'Ø®Ø¨Ø² ØµØ§Ø¬', icon: 'ğŸ«“', unit: 'Ø¨Ø§ÙƒÙˆ' },
                ]
            },
            {
                id: 'cat9', title: 'Ø­Ù„ÙˆÙŠØ§Øª ÙˆÙ…Ø´Ø±ÙˆØ¨Ø§Øª', icon: 'candy', emoji: 'ğŸ«',
                items: [
                    { id: 150, name: 'Ø´ÙˆÙƒÙˆÙ„Ø§ØªØ©', icon: 'ğŸ«', unit: 'Ø­Ø¨Ø©' },
                    { id: 151, name: 'Ø¨Ø³ÙƒÙˆÙŠØª Ù…Ø§ÙƒØ§Ùˆ', icon: 'ğŸª', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 152, name: 'Ø¨Ø³ÙƒÙˆÙŠØª Ø£ÙˆØ±ÙŠÙˆ', icon: 'ğŸª', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 153, name: 'Ø¹ØµÙŠØ± Ø±Ø§Ù†ÙŠ', icon: 'ğŸ§ƒ', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 154, name: 'Ø¹ØµÙŠØ± Ø³Ø§Ù†ØªÙˆØ¨', icon: 'ğŸ§ƒ', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 155, name: 'Ù…Ø´Ø±ÙˆØ¨ ØºØ§Ø²ÙŠ', icon: 'ğŸ¥¤', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 156, name: 'ÙƒÙŠÙƒ Ø¬Ø§Ù‡Ø²', icon: 'ğŸ°', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 157, name: 'Ø±Ù‚Ø§Ø¦Ù‚ Ø´ÙŠØ¨Ø³', icon: 'ğŸ¥”', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 158, name: 'Ù…ÙƒØ³Ø±Ø§Øª', icon: 'ğŸ¥œ', unit: 'ÙƒÙŠØ³' },
                    { id: 159, name: 'Ø­Ù„Ø§ÙˆØ© Ø·Ø­ÙŠÙ†ÙŠØ©', icon: 'ğŸ¯', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 160, name: 'Ù…Ø±Ø¨Ù‰', icon: 'ğŸ“', unit: 'Ø¨Ø±Ø·Ù…Ø§Ù†' },
                    { id: 161, name: 'Ø¹Ø³Ù„', icon: 'ğŸ¯', unit: 'Ø¨Ø±Ø·Ù…Ø§Ù†' },
                    { id: 162, name: 'Ù†ÙˆØªÙŠÙ„Ø§', icon: 'ğŸ«', unit: 'Ø¨Ø±Ø·Ù…Ø§Ù†' },
                ]
            },
            {
                id: 'cat10', title: 'Ø£Ø¬Ø¨Ø§Ù† Ø±Ø§Ù‚ÙŠØ©', icon: 'slice', emoji: 'ğŸ§€',
                items: [
                    { id: 170, name: 'Ø¬Ø¨Ù†Ø© ÙÙŠØªØ§', icon: 'ğŸ§€', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 171, name: 'Ø¬Ø¨Ù†Ø© Ù…ÙˆØ²Ø§Ø±ÙŠÙ„Ø§', icon: 'ğŸ§€', unit: 'ÙƒÙŠØ³' },
                    { id: 172, name: 'Ø¬Ø¨Ù†Ø© Ù…Ø«Ù„Ø«Ø§Øª', icon: 'ğŸ§€', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 173, name: 'Ø¬Ø¨Ù†Ø© Ø¥ÙŠØ¯Ø§Ù…', icon: 'ğŸ§€', unit: 'Ø­Ø¨Ø©' },
                    { id: 174, name: 'Ø¬Ø¨Ù†Ø© Ø´ÙŠØ¯Ø±', icon: 'ğŸ§€', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 175, name: 'Ø¬Ø¨Ù†Ø© ÙƒØ±ÙŠÙ…ÙŠ', icon: 'ğŸ§€', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 176, name: 'Ø¬Ø¨Ù†Ø© Ø­Ù„ÙˆÙ…', icon: 'ğŸ§€', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 177, name: 'Ø¬Ø¨Ù†Ø© Ù‚Ø±ÙŠØ´', icon: 'ğŸ§€', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 178, name: 'Ø¬Ø¨Ù†Ø© Ø¹ÙƒØ§ÙˆÙŠ', icon: 'ğŸ§€', unit: 'ÙƒÙŠÙ„Ùˆ' },
                ]
            },
            {
                id: 'cat11', title: 'Ø¨Ù‡Ø§Ø±Ø§Øª ÙˆØ¹Ø·Ø§Ø±Ø©', icon: 'flame', emoji: 'ğŸŒ¶ï¸',
                items: [
                    { id: 190, name: 'Ø¨Ø²Ø§Ø± (Ø¨Ù‡Ø§Ø±Ø§Øª Ù…Ø´ÙƒÙ„Ø©)', icon: 'ğŸ«™', unit: 'ÙƒÙŠØ³' },
                    { id: 191, name: 'Ø­Ø±Ø§Ø±Ø§Øª Ù„ÙŠØ¨ÙŠØ©', icon: 'ğŸŒ¶ï¸', unit: 'ÙƒÙŠØ³' },
                    { id: 192, name: 'ÙÙ„ÙÙ„ Ø£Ø­Ù…Ø± Ù…Ø·Ø­ÙˆÙ†', icon: 'ğŸŒ¶ï¸', unit: 'ÙƒÙŠØ³' },
                    { id: 193, name: 'Ù…Ù„Ø­ ØµØ®Ø±ÙŠ', icon: 'ğŸ§‚', unit: 'ÙƒÙŠØ³' },
                    { id: 194, name: 'ÙƒÙ…ÙˆÙ†', icon: 'ğŸ«™', unit: 'ÙƒÙŠØ³' },
                    { id: 195, name: 'ÙƒØ±ÙƒÙ…', icon: 'ğŸ«™', unit: 'ÙƒÙŠØ³' },
                    { id: 196, name: 'Ù‚Ø±ÙØ©', icon: 'ğŸ«™', unit: 'ÙƒÙŠØ³' },
                    { id: 197, name: 'Ø²Ù†Ø¬Ø¨ÙŠÙ„', icon: 'ğŸ«™', unit: 'ÙƒÙŠØ³' },
                    { id: 198, name: 'ÙÙ„ÙÙ„ Ø£Ø³ÙˆØ¯', icon: 'ğŸ«™', unit: 'ÙƒÙŠØ³' },
                    { id: 199, name: 'ÙˆØ±Ù‚ ØºØ§Ø±', icon: 'ğŸŒ¿', unit: 'ÙƒÙŠØ³' },
                    { id: 200, name: 'Ø­Ø¨Ù‡Ø§Ù†', icon: 'ğŸ«™', unit: 'ÙƒÙŠØ³' },
                    { id: 201, name: 'Ø²Ø¹ØªØ±', icon: 'ğŸŒ¿', unit: 'ÙƒÙŠØ³' },
                    { id: 202, name: 'Ø³Ù…Ø§Ù‚', icon: 'ğŸ«™', unit: 'ÙƒÙŠØ³' },
                ]
            },
            {
                id: 'cat12', title: 'Ø¹Ù†Ø§ÙŠØ© Ø´Ø®ØµÙŠØ©', icon: 'sparkles', emoji: 'âœ¨',
                items: [
                    { id: 220, name: 'Ø´Ø§Ù…Ø¨Ùˆ', icon: 'ğŸ§´', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 221, name: 'Ø¨Ù„Ø³Ù… Ø´Ø¹Ø±', icon: 'ğŸ§´', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 222, name: 'ØµØ§Ø¨ÙˆÙ† Ù‚Ø·Ø¹', icon: 'ğŸ§¼', unit: 'Ø­Ø¨Ø©' },
                    { id: 223, name: 'ØµØ§Ø¨ÙˆÙ† Ø³Ø§Ø¦Ù„', icon: 'ğŸ§´', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 224, name: 'Ù…Ø¹Ø¬ÙˆÙ† Ø£Ø³Ù†Ø§Ù†', icon: 'ğŸª¥', unit: 'Ø­Ø¨Ø©' },
                    { id: 225, name: 'ÙØ±Ø´Ø§Ø© Ø£Ø³Ù†Ø§Ù†', icon: 'ğŸª¥', unit: 'Ø­Ø¨Ø©' },
                    { id: 226, name: 'Ø­ÙØ§Ø¶Ø§Øª Ø£Ø·ÙØ§Ù„', icon: 'ğŸ‘¶', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 227, name: 'Ù…Ù†Ø§Ø¯ÙŠÙ„ Ù…Ø¨Ù„Ù„Ø©', icon: 'ğŸ§»', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 228, name: 'Ù…Ø²ÙŠÙ„ Ø¹Ø±Ù‚', icon: 'ğŸ§´', unit: 'Ø­Ø¨Ø©' },
                    { id: 229, name: 'ÙƒØ±ÙŠÙ… Ù…Ø±Ø·Ø¨', icon: 'ğŸ§´', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 230, name: 'ÙÙˆØ· ØµØ­ÙŠØ©', icon: 'ğŸ“¦', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 231, name: 'Ø´ÙØ±Ø§Øª Ø­Ù„Ø§Ù‚Ø©', icon: 'ğŸª’', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 232, name: 'Ù‚Ø·Ù† Ø·Ø¨ÙŠ', icon: 'â˜ï¸', unit: 'Ø¨Ø§ÙƒÙˆ' },
                ]
            },
            {
                id: 'cat13', title: 'ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØª', icon: 'home', emoji: 'ğŸ ',
                items: [
                    { id: 250, name: 'ØµØ§Ø¨ÙˆÙ† Ù…Ù„Ø§Ø¨Ø³', icon: 'ğŸ§º', unit: 'ÙƒÙŠØ³' },
                    { id: 251, name: 'Ù…Ù†Ø¹Ù… Ù…Ù„Ø§Ø¨Ø³', icon: 'ğŸ§´', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 252, name: 'Ø³Ø§Ø¦Ù„ ØµØ­ÙˆÙ†', icon: 'ğŸ§¼', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 253, name: 'ÙƒÙ„ÙˆØ±ÙƒØ³', icon: 'ğŸ§´', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 254, name: 'Ù…Ù†Ø§Ø¯ÙŠÙ„ ÙˆØ±Ù‚ÙŠØ©', icon: 'ğŸ§»', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 255, name: 'Ø£ÙƒÙŠØ§Ø³ Ø²Ø¨Ø§Ù„Ø©', icon: 'ğŸ—‘ï¸', unit: 'Ø±ÙˆÙ„' },
                    { id: 256, name: 'Ù…Ù†Ø¸Ù Ø£Ø±Ø¶ÙŠØ§Øª', icon: 'ğŸ§¹', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 257, name: 'Ø³ÙÙ†Ø¬ Ø¬Ù„ÙŠ', icon: 'ğŸ§½', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 258, name: 'Ù„ÙŠÙØ©', icon: 'ğŸ§½', unit: 'Ø­Ø¨Ø©' },
                    { id: 259, name: 'Ù…Ø¹Ø·Ø± Ø¬Ùˆ', icon: 'ğŸŒ¸', unit: 'Ø¹Ù„Ø¨Ø©' },
                    { id: 260, name: 'Ù‚ÙØ§Ø²Ø§Øª', icon: 'ğŸ§¤', unit: 'Ø¨Ø§ÙƒÙˆ' },
                    { id: 261, name: 'ÙˆØ±Ù‚ Ø£Ù„Ù…Ù†ÙŠÙˆÙ…', icon: 'ğŸ“„', unit: 'Ø±ÙˆÙ„' },
                    { id: 262, name: 'Ø£ÙƒÙŠØ§Ø³ Ø­ÙØ¸', icon: 'ğŸ“¦', unit: 'Ø¨Ø§ÙƒÙˆ' },
                ]
            }
        ];

        // --- STATE ---
        let cart = JSON.parse(localStorage.getItem('jeeb_cart') || '{}');
        let family = JSON.parse(localStorage.getItem('jeeb_family') || '[]');
        let activeView = 'shopping'; // 'shopping' or 'family'
        let activeTab = DATA[0].id;
        let searchQuery = '';

        // --- INIT ---
        function init() {
            renderTabs();
            renderItems();
            renderFamily();
            updateUI();

            // Set Date
            const dateOpts = { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' };
            document.getElementById('current-date').innerText = new Date().toLocaleDateString('ar-LY', dateOpts);

            lucide.createIcons();

            // ØªÙ‡ÙŠØ¦Ø© Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„ØµÙˆØª
            initSplash();
        }

        // --- SOUND SYSTEM (Ù†Ø¸Ø§Ù… Ø§Ù„ØµÙˆØª) ---
        const SoundManager = {
            muted: localStorage.getItem('jeeb_muted') === 'true',
            sounds: {
                welcome: new Howl({ src: ['https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3'], volume: 0.5 }), // Ø¬Ø±Ø³ Ù‡Ø§Ø¯Ø¦
                click: new Howl({ src: ['https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3'], volume: 0.3 }), // Ù†Ù‚Ø±Ø© Ø®ÙÙŠÙØ©
                success: new Howl({ src: ['https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3'], volume: 0.6 }), // Ù†ØºÙ…Ø© Ù†Ø¬Ø§Ø­
                add: new Howl({ src: ['https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3'], volume: 0.4 }) // Ù†Ù‚Ø±Ø© Ø¥Ø¶Ø§ÙØ©
            },

            play(name) {
                if (this.muted) return;
                if (this.sounds[name]) {
                    this.sounds[name].play();
                }
            },

            toggleMute() {
                this.muted = !this.muted;
                localStorage.setItem('jeeb_muted', this.muted);
                Howler.mute(this.muted);
                return this.muted;
            }
        };

        // ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„ÙƒØªÙ… Ø¹Ù†Ø¯ Ø§Ù„Ø¨Ø¯Ø¡
        if (SoundManager.muted) Howler.mute(true);

        // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø²Ø± Ø§Ù„ÙƒØªÙ… ÙÙŠ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
        function toggleMute() {
            const isMuted = SoundManager.toggleMute();
            updateMuteIcon(isMuted);
            if (!isMuted) SoundManager.play('click');
        }

        function updateMuteIcon(isMuted) {
            const btn = document.getElementById('mute-icon');
            if (isMuted) {
                btn.setAttribute('data-lucide', 'volume-x');
            } else {
                btn.setAttribute('data-lucide', 'volume-2');
            }
            lucide.createIcons();
        }

        // --- SPLASH SCREEN (Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©) ---
        function initSplash() {
            updateMuteIcon(SoundManager.muted); // ØªØ­Ø¯ÙŠØ« Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„ØµÙˆØª

            const splash = document.getElementById('splash-screen');
            const iconsContainer = document.getElementById('splash-icons');

            // ØªÙˆÙ„ÙŠØ¯ Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
            const allIcons = ['carrot', 'chef-hat', 'shopping-basket', 'coffee', 'croissant', 'candy', 'beef', 'milk', 'fish', 'apple', 'pizza'];

            // Ø¥Ù†Ø´Ø§Ø¡ 20 Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
            for (let i = 0; i < 20; i++) {
                const icon = document.createElement('div');
                const updateIcon = allIcons[Math.floor(Math.random() * allIcons.length)];

                // Ø®ØµØ§Ø¦Øµ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ù„Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„Ø¯ÙˆØ±Ø§Ù†
                const left = Math.random() * 100;
                const top = Math.random() * 100;
                const rotate = Math.random() * 360;
                const size = 30 + Math.random() * 50;

                icon.innerHTML = `<i data-lucide="${updateIcon}" width="${size}" height="${size}"></i>`;
                icon.className = 'absolute text-white/10 transform transition-all duration-1000';
                icon.style.left = `${left}%`;
                icon.style.top = `${top}%`;
                icon.style.transform = `rotate(${rotate}deg)`;

                iconsContainer.appendChild(icon);
            }
            lucide.createIcons();

            // ØªØ¬Ù‡ÙŠØ² Ø§Ù„ØµÙˆØª Ù„Ù„ØªØ´ØºÙŠÙ„ Ø¹Ù†Ø¯ Ø£ÙˆÙ„ ØªÙØ§Ø¹Ù„ (Autoplay Policy Hack)
            document.body.addEventListener('click', () => {
                if (Howler.ctx && Howler.ctx.state !== 'running') {
                    Howler.ctx.resume();
                }
            }, { once: true });

            // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ø§Ø´Ø© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†ÙŠ
            setTimeout(() => {
                splash.classList.add('opacity-0', 'pointer-events-none');

                // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„ØªØ±Ø­ÙŠØ¨
                setTimeout(() => {
                    SoundManager.play('welcome');
                }, 500); // ØªØ£Ø®ÙŠØ± Ø¨Ø³ÙŠØ·

            }, 5000); // 5000ms = 5 Ø«ÙˆØ§Ù†ÙŠ
        }

        // --- UI RENDERING ---
        function renderTabs() {
            const container = document.getElementById('categories-container');
            container.innerHTML = DATA.map(cat => `
                <button 
                    onclick="setTab('${cat.id}')" 
                    class="category-tab px-6 py-3 rounded-2xl text-sm font-bold flex-shrink-0 flex items-center gap-2 ${activeTab === cat.id ? 'active' : 'bg-white text-gray-400 hover:bg-gray-50'}"
                >
                    <i data-lucide="${cat.icon}" class="w-4 h-4"></i>
                    ${cat.title}
                </button>
            `).join('');
            lucide.createIcons();
        }

        function renderItems() {
            const grid = document.getElementById('items-grid');
            const empty = document.getElementById('empty-state');

            let items = [];
            if (searchQuery) {
                // Fuzzy Search simplified
                const q = searchQuery.toLowerCase();
                DATA.forEach(c => {
                    c.items.forEach(i => {
                        if (i.name.includes(q)) items.push(i);
                    });
                });
            } else {
                items = DATA.find(c => c.id === activeTab)?.items || [];
            }

            if (items.length === 0) {
                grid.innerHTML = '';
                empty.classList.remove('hidden');
                return;
            }
            empty.classList.add('hidden');

            grid.innerHTML = items.map(item => {
                const count = cart[item.id] || 0;
                return `
                <div onclick="addToCart(${item.id})" class="item-card relative p-4 rounded-3xl cursor-pointer ${count > 0 ? 'selected' : ''}">
                    <!-- Decoration -->
                    <div class="absolute top-2 left-2 w-2 h-2 rounded-full ${count > 0 ? 'bg-peach-500' : 'bg-gray-100'}"></div>
                    
                    <div class="text-center mt-2 mb-3">
                        <div class="text-4xl mb-2">${item.icon || 'ğŸ“¦'}</div>
                        <h3 class="font-bold text-lg text-sage-900">${item.name}</h3>
                        <p class="text-xs text-gray-400">${item.unit}</p>
                    </div>

                    ${count === 0 ? `
                        <button class="w-full bg-cream-100 text-sage-600 py-2.5 rounded-xl font-bold text-sm hover:bg-cream-200 transition-colors">
                            Ø¬ÙŠØ¨
                        </button>
                    ` : `
                        <div class="flex items-center justify-between bg-white rounded-xl overflow-hidden shadow-sm border border-gray-100" onclick="event.stopPropagation()">
                            <button onclick="updateCart(${item.id}, -1)" class="w-10 h-10 flex items-center justify-center text-red-400 hover:bg-red-50 text-lg font-bold">-</button>
                            <span class="font-black text-emerald-600">${count}</span>
                            <button onclick="updateCart(${item.id}, 1)" class="w-10 h-10 flex items-center justify-center text-emerald-600 hover:bg-emerald-50 text-lg font-bold">+</button>
                        </div>
                    `}
                </div>
                `;
            }).join('');
        }

        function renderFamily() {
            const container = document.getElementById('family-list');
            if (family.length === 0) {
                container.innerHTML = `
                    <div class="bg-white p-6 rounded-3xl text-center shadow-sm border border-dashed border-gray-200">
                        <p class="text-gray-400">Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙØ§Ø¶ÙŠØ©ØŒ Ø¶ÙŠÙÙŠ Ø£Ø³Ù…Ø§Ø¡ Ø£Ø¨Ù†Ø§Ø¦Ùƒ</p>
                    </div>
                `;
                return;
            }
            container.innerHTML = family.map((son, idx) => `
                <div class="bg-white p-4 rounded-3xl shadow-sm flex justify-between items-center border border-gray-50">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-full bg-peach-100 text-peach-600 flex items-center justify-center font-bold text-xl">
                            ${son.name[0]}
                        </div>
                        <div>
                            <h3 class="font-bold text-gray-800">${son.name}</h3>
                            <p class="text-xs text-gray-400">${son.phone}</p>
                        </div>
                    </div>
                    <button onclick="removeFamily(${idx})" class="p-2 text-gray-300 hover:text-red-400">
                        <i data-lucide="x" class="w-5 h-5"></i>
                    </button>
                </div>
            `).join('');
            lucide.createIcons();
        }

        // --- ACTIONS ---
        function addToCart(id) {
            SoundManager.play('add'); // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ø¥Ø¶Ø§ÙØ©
            if (!cart[id]) updateCart(id, 1);
        }

        function updateCart(id, delta) {
            SoundManager.play('click'); // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ù‚Ø±
            cart[id] = (cart[id] || 0) + delta;
            if (cart[id] <= 0) delete cart[id];
            localStorage.setItem('jeeb_cart', JSON.stringify(cart));
            renderItems();
            updateUI();
        }

        function updateUI() {
            const count = Object.keys(cart).length;
            document.getElementById('header-count').innerText = Object.values(cart).reduce((a, b) => a + b, 0);

            const bar = document.getElementById('action-bar');
            if (count > 0 && activeView === 'shopping') {
                bar.classList.remove('translate-y-32');
            } else {
                bar.classList.add('translate-y-32');
            }
        }

        function setTab(id) {
            SoundManager.play('click'); // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ù‚Ø±
            activeTab = id;
            renderTabs();
            renderItems();
        }

        function toggleView() {
            SoundManager.play('click'); // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ù‚Ø±
            activeView = activeView === 'shopping' ? 'family' : 'shopping';

            const btn = document.getElementById('view-icon');
            const shoppingDiv = document.getElementById('view-shopping');
            const familyDiv = document.getElementById('view-family');

            if (activeView === 'family') {
                btn.setAttribute('data-lucide', 'shopping-basket');
                shoppingDiv.classList.add('hidden');
                familyDiv.classList.remove('hidden');
            } else {
                btn.setAttribute('data-lucide', 'users');
                shoppingDiv.classList.remove('hidden');
                familyDiv.classList.add('hidden');
            }

            lucide.createIcons();
            updateUI();
        }

        // --- FAMILY FEATURES ---
        async function addFamilyMember() {
            const { value: formValues } = await Swal.fire({
                title: 'Ø¥Ø¶Ø§ÙØ© Ø§Ø¨Ù† Ø¬Ø¯ÙŠØ¯',
                html: `
                    <input id="swal-name" class="swal2-input" placeholder="Ø§Ù„Ø§Ø³Ù… (Ù…Ø«Ù„Ø§Ù‹: Ø£Ø­Ù…Ø¯)">
                    <input id="swal-phone" class="swal2-input" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (218...)">
                `,
                focusConfirm: false,
                confirmButtonText: 'Ø­ÙØ¸',
                showCancelButton: true,
                cancelButtonText: 'Ø¥Ù„ØºØ§Ø¡',
                preConfirm: () => {
                    return [
                        document.getElementById('swal-name').value,
                        document.getElementById('swal-phone').value
                    ]
                }
            });

            if (formValues && formValues[0] && formValues[1]) {
                family.push({ name: formValues[0], phone: formValues[1] });
                localStorage.setItem('jeeb_family', JSON.stringify(family));
                renderFamily();
                Swal.fire({
                    icon: 'success',
                    title: 'ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!',
                    toast: true,
                    position: 'top',
                    showConfirmButton: false,
                    timer: 2000
                });
            }
        }

        function removeFamily(idx) {
            Swal.fire({
                title: 'Ù…ØªØ£ÙƒØ¯Ø© ØªØ¨ÙŠ ØªØ­Ø°ÙÙŠØŸ',
                text: "Ù„Ù† ØªØ¸Ù‡Ø± Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Ù†Ø¹Ù…ØŒ Ø§Ø­Ø°ÙÙŠ',
                cancelButtonText: 'Ù„Ø§'
            }).then((result) => {
                if (result.isConfirmed) {
                    family.splice(idx, 1);
                    localStorage.setItem('jeeb_family', JSON.stringify(family));
                    renderFamily();
                }
            });
        }

        // --- OUTPUT GENERATION ---
        function generateMessage() {
            let msg = `ğŸ›’ *Ù‚Ø§Ø¦Ù…Ø© Ù…Ø·Ø¨Ø®Ù†Ø§ Ø§Ù„ÙŠÙˆÙ…*:\n\n`;

            // Group by category Logic
            let grouped = {};
            for (let [id, qty] of Object.entries(cart)) {
                let item, cat;
                DATA.forEach(c => {
                    let found = c.items.find(i => i.id == id);
                    if (found) { item = found; cat = c; }
                });

                if (item) {
                    if (!grouped[cat.title]) grouped[cat.title] = [];
                    grouped[cat.title].push(`${item.name} (${qty} ${item.unit})`);
                }
            }

            for (let [catTitle, items] of Object.entries(grouped)) {
                msg += `ğŸ”¸ *${catTitle}*\n`;
                items.forEach(i => msg += `   - ${i}\n`);
                msg += '\n';
            }

            msg += `\nØ§Ù„Ù„Ù‡ ÙŠØ±Ø¶Ù‰ Ø¹Ù„ÙŠÙƒ ÙŠØ§ ÙˆÙ„Ø¯ÙŠ â¤ï¸`;
            return msg;
        }

        async function handleSend() {
            SoundManager.play('success'); // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ø¬Ø§Ø­
            const msg = generateMessage();

            if (family.length > 0) {
                const inputOptions = {};
                family.forEach((son, idx) => {
                    inputOptions[idx] = son.name;
                });
                inputOptions['other'] = 'Ø±Ù‚Ù… Ø¢Ø®Ø± / Ù…Ø´Ø§Ø±ÙƒØ© Ø¹Ø§Ù…Ø©';

                const { value: selectedIdx } = await Swal.fire({
                    title: 'Ù„Ù…Ù† ØªØ¨ÙŠ ØªØ¨Ø¹Ø«ÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©ØŸ',
                    input: 'radio',
                    inputOptions: inputOptions,
                    inputValue: '0',
                    confirmButtonText: 'Ø¥Ø±Ø³Ø§Ù„',
                    showCancelButton: true,
                    cancelButtonText: 'Ø¥Ù„ØºØ§Ø¡'
                });

                if (selectedIdx === undefined) return;

                if (selectedIdx === 'other') {
                    window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`);
                } else {
                    const son = family[selectedIdx];
                    let phone = son.phone.replace(/\D/g, '');
                    if (phone.startsWith('09')) phone = '218' + phone.substring(1);
                    if (phone.startsWith('9')) phone = '218' + phone;

                    const sonMsg = `ÙŠØ§ ${son.name}ØŒ \n` + msg;
                    window.open(`https://wa.me/${phone}?text=${encodeURIComponent(sonMsg)}`);
                }

            } else {
                window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`);
            }
        }

        function copyList() {
            SoundManager.play('success'); // ØªØ´ØºÙŠÙ„ ØµÙˆØª Ø§Ù„Ù†Ø¬Ø§Ø­
            const msg = generateMessage();
            navigator.clipboard.writeText(msg).then(() => {
                Swal.fire({
                    icon: 'success',
                    title: 'ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©',
                    toast: true,
                    position: 'top',
                    showConfirmButton: false,
                    timer: 2000
                });
            });
        }

        function confirmClear() {
            Swal.fire({
                title: 'ØªØµÙÙŠØ± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©ØŸ',
                text: "Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯Ø© Ù…Ù† Ù…Ø³Ø­ ÙƒÙ„ Ø§Ù„Ø£ØºØ±Ø§Ø¶ØŸ",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#ff8b64',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Ù†Ø¹Ù…ØŒ Ø§Ù…Ø³Ø­ÙŠ',
                cancelButtonText: 'ØªØ±Ø§Ø¬Ø¹'
            }).then((result) => {
                if (result.isConfirmed) {
                    cart = {};
                    localStorage.setItem('jeeb_cart', JSON.stringify({}));
                    renderItems();
                    updateUI();
                    Swal.fire({
                        title: 'ØªÙ… Ø§Ù„Ù…Ø³Ø­!',
                        icon: 'success',
                        toast: true,
                        position: 'top',
                        showConfirmButton: false,
                        timer: 1500
                    });
                }
            })
        }

        // Search Listener
        document.getElementById('search-input').addEventListener('input', (e) => {
            searchQuery = e.target.value.trim();
            renderItems();
        });

        // Start
        window.onload = init;
    </script>
</body>

</html>